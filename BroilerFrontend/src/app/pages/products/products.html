<div>
  <h1 class="page-title">Products and their Prices</h1>
  <table class="product-table" matSort (matSortChange)="sortData($event)">
    <tr>
      <th mat-sort-header="startDate">
        <div class="header-cell">Start Date</div>
      </th>
      <th mat-sort-header="type">
        <div class="header-cell">Type</div>
      </th>
      <th mat-sort-header="price">
        <div class="header-cell">Price</div>
      </th>
      <th mat-sort-header="actions">
        <div class="header-cell">Actions</div>
      </th>
    </tr>
    <tr
      appEditProduct
      [isNewProduct]="true"
      [allProductOptions]="productsList"
      [product]="emptyProduct"
      (isExited)="onCancelEdit()"
      (isSaved)="initializeProducts()"
    ></tr>

    @for (product of products; track $index) { @if (currentlyEditingId == product.productId &&
    currentlyEditingDate == product.startDate) {
    <tr
      appEditProduct
      [isNewProduct]="false"
      [allProductOptions]="productsList"
      [product]="product"
      (isExited)="onCancelEdit()"
      (isSaved)="initializeProducts()"
    ></tr>
    } @else {
    <tr>
      <td>{{ product.startDate }}</td>
      <td>{{ product.type }}</td>
      <td>{{ product.price }} â‚¬</td>
      <td>
        <mat-icon class="edit-button" (click)="onEdit(product)">edit</mat-icon>
      </td>
    </tr>
    } }
  </table>
</div>
