<div>
  <h1 class="page-title">Users</h1>
  <table class="user-table" matSort (matSortChange)="sortData($event)">
    <tr>
      <th mat-sort-header="firstName">First Name:</th>
      <th mat-sort-header="name">Last Name:</th>
      <th mat-sort-header="actions">Actions:</th>
    </tr>

    <tr
      appEditUser
      [user]="emptyUser"
      [isNewUser]="true"
      (isCanceled)="onCancelEdit()"
      (isSaved)="initializeUsers()"
    ></tr>

    @for (user of users; track $index) { @if(user.userId == this.currentlyEditingId){
    <tr
      appEditUser
      [user]="user"
      [isNewUser]="false"
      (isCanceled)="onCancelEdit()"
      (isSaved)="initializeUsers()"
    ></tr>
    } @else {
    <tr>
      <td>{{ user.givenName }}</td>
      <td>{{ user.surname }}</td>
      <td>
        <mat-icon class="edit-icon" (click)="onEdit(user.userId!)">edit</mat-icon>
      </td>
    </tr>
    } }
  </table>
</div>
